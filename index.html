<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Raum-Reinigung Kalkulator + KI â€“ v3 (GitHub Pages kompatibel)</title>
  <link rel="icon" href="data:,">
  <style>
    :root { --pad: 12px; --radius: 12px; }
    * { box-sizing: border-box; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    body { margin: 0; background:#f6f7fb; color:#102027; }
    header { position: sticky; top: 0; z-index: 5; background: #0d47a1; color: #fff; padding: 14px var(--pad); box-shadow: 0 2px 8px rgba(0,0,0,.15); }
    header h1 { margin: 0; font-size: 18px; }
    .wrap { padding: var(--pad); max-width: 980px; margin: 0 auto; }
    .card { background:#fff; border-radius: var(--radius); padding: var(--pad); margin: 10px 0 16px; box-shadow: 0 4px 12px rgba(0,0,0,.08); }
    .row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
    .row-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; }
    .row-4 { display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 10px; }
    @media (max-width: 720px) { .row, .row-3, .row-4 { grid-template-columns: 1fr; } }
    label { font-size: 13px; color:#37474f; display:block; margin-bottom: 6px; }
    input[type="text"], input[type="number"], input[type="url"], select { width: 100%; padding: 12px; border-radius: 10px; border: 1px solid #cfd8dc; background: #fff; }
    input[type="number"]::-webkit-outer-spin-button, input[type="number"]::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
    .btn { appearance:none; border:0; padding:12px 14px; border-radius: 10px; background:#0d47a1; color:#fff; font-weight:600; cursor:pointer; }
    .btn.secondary { background: #455a64; }
    .btn.ghost { background: transparent; color:#0d47a1; border: 1px solid #0d47a1; }
    .btn.flat { background:#eceff1; color:#263238; }
    .muted { color:#607d8b; font-size:13px; }
    .room { border:1px solid #e0e0e0; border-radius: 12px; padding: 12px; margin-top: 10px; }
    .room h3 { margin: 0 0 8px; font-size: 16px; }
    .thumbs { display:flex; gap:8px; overflow:auto; padding-bottom: 6px; }
    .thumbs img { height: 64px; width: 64px; object-fit: cover; border-radius: 8px; border:1px solid #eceff1; }
    .total { font-size: 22px; font-weight: 800; }
    .right { text-align:right; }
    .line { display:flex; justify-content: space-between; align-items:center; gap:8px; margin: 6px 0; }
    .divider { height:1px; background:#eceff1; margin: 10px 0; }
    .footer-note { text-align:center; color:#78909c; font-size:12px; padding: 10px 0 30px; }
    .hint { font-size:12px; color:#546e7a; }
    .danger { color:#b00020; }
  </style>
</head>
<body>
<header>
  <h1>ðŸ§½ Raum-Reinigung Kalkulator + KI â€“ v3</h1>
  <div class="muted">Sonderreinigung: 60 â‚¬/h Â· Unterhaltsreinigung: 35 â‚¬/h Â· MwSt 19%</div>
</header>

<div class="wrap">
  <div class="card">
    <div class="row">
      <div>
        <label>Reinigungsart</label>
        <select id="cleanType">
          <option value="unterhalt">Unterhaltsreinigung (35 â‚¬/h)</option>
          <option value="sonder">Sonderreinigung (60 â‚¬/h)</option>
        </select>
      </div>
      <div>
        <label>TeamgrÃ¶ÃŸe</label>
        <input id="teamSize" type="number" value="2">
      </div>
    </div>
    <div class="row-3" style="margin-top:8px;">
      <div>
        <label>Overhead %</label>
        <input id="overhead" type="number" value="10">
      </div>
      <div>
        <label>Gewinn %</label>
        <input id="profit" type="number" value="15">
      </div>
      <div>
        <label>MwSt %</label>
        <input id="vat" type="number" value="19">
      </div>
    </div>
  </div>

  <div class="card">
    <div class="row-3">
      <div>
        <label>Anfahrt (km, einfach)</label>
        <input id="distanceKm" type="number" value="8">
      </div>
      <div>
        <label>Geschwindigkeit (km/h)</label>
        <input id="speed" type="number" value="35">
      </div>
      <div>
        <label>Park-/Zugangssuche (Min.)</label>
        <input id="parkingMin" type="number" value="10">
      </div>
    </div>
    <div class="row" style="margin-top:8px;">
      <div>
        <label>Material â‚¬/mÂ²</label>
        <input id="materialPerM2" type="number" value="0.5">
      </div>
      <div>
        <label>Maschinenpauschale â‚¬</label>
        <input id="machineFee" type="number" value="8">
      </div>
      <div>
        <label>Standard-RÃ¼stzeit (Min.)</label>
        <input id="setupMin" type="number" value="15">
      </div>
    </div>
  </div>

  <div class="card">
    <button type="button" class="btn" data-action="add-room">+ Raum hinzufÃ¼gen</button>
    <div id="rooms"></div>
  </div>

  <div class="card">
    <div class="line"><div>Zwischensumme netto</div><div id="sumNet">0,00 â‚¬</div></div>
    <div class="line"><div>MwSt</div><div id="sumVat">0,00 â‚¬</div></div>
    <div class="divider"></div>
    <div class="line"><div class="total">Gesamt (brutto)</div><div id="sumGross" class="total">0,00 â‚¬</div></div>
    <div class="line muted"><div>Gesamt-Arbeitszeit</div><div id="sumTime">0 Min</div></div>
    <div class="line muted"><div>Fertig in</div><div id="sumFinish">â€“</div></div>
    <button type="button" class="btn ghost" id="printBtn">Als PDF drucken/teilen</button>
    <div id="msg" class="muted" style="margin-top:8px;"></div>
  </div>

  <p class="footer-note">Wenn etwas nicht reagiert: Seite neu laden. Diese Version nutzt **keine** Inline-Skripte (GitHub Pages kompatibel).</p>
</div>

<template id="roomTemplate">
  <div class="card room">
    <h3>ðŸ§¹ <span class="room-title">Neuer Raum</span></h3>
    <div class="thumbs" data-thumbs></div>
    <div class="row-3">
      <div>
        <label>Raumname</label>
        <input data-roomname type="text" placeholder="z. B. Bad EG">
      </div>
      <div>
        <label>Raumtyp</label>
        <select data-roomtype>
          <option>Bad</option>
          <option>KÃ¼che</option>
          <option>Wohnraum</option>
          <option>BÃ¼ro</option>
          <option>Flur</option>
          <option>Treppenhaus</option>
          <option>Sonstiges</option>
        </select>
      </div>
      <div>
        <label>FlÃ¤che (mÂ²)</label>
        <input data-area type="number" value="12">
      </div>
    </div>
    <div class="row-4" style="margin-top:8px;">
      <div>
        <label>Bodenart</label>
        <select data-floor>
          <option>Fliesen</option>
          <option>Teppich</option>
          <option>Parkett</option>
          <option>PVC</option>
          <option>Naturstein</option>
        </select>
      </div>
      <div>
        <label>FensterflÃ¤che (mÂ²)</label>
        <input data-windowm2 type="number" value="0">
      </div>
      <div>
        <label>Fenster-Min./mÂ²</label>
        <select data-windowmin>
          <option value="2.0">2.0 (innen)</option>
          <option value="3.5" selected>3.5 (beidseitig)</option>
        </select>
      </div>
      <div>
        <label>Verschmutzungsgrad</label>
        <select data-soil>
          <option>S1</option>
          <option>S2</option>
          <option selected>S3</option>
          <option>S4</option>
          <option>S5</option>
        </select>
      </div>
    </div>
    <div class="line" style="margin-top:8px;">
      <button type="button" class="btn flat" data-action="ai-suggest">KI-Vorschlag (S1â€“S5)</button>
      <button type="button" class="btn secondary" data-action="add-images">Fotos hinzufÃ¼gen</button>
      <span class="muted" data-aiNote></span>
    </div>
    <details style="margin-top:8px;">
      <summary>Weitere Angaben (optional)</summary>
      <div class="row-4" style="margin-top:8px;">
        <div>
          <label>Sonderaufgaben (Min.)</label>
          <input data-special type="number" value="0">
        </div>
        <div>
          <label>ZusÃ¤tzliche RÃ¼stzeit (Min.)</label>
          <input data-setup type="number" value="0">
        </div>
        <div>
          <label>Material â‚¬/mÂ² (Raum)</label>
          <input data-matm2 type="number" placeholder="leer = Standard">
        </div>
        <div>
          <label>Maschinenpauschale â‚¬ (Raum)</label>
          <input data-macfee type="number" placeholder="leer = Standard">
        </div>
      </div>
    </details>
    <div class="divider"></div>
    <div class="row-3">
      <div class="muted">
        <div class="line"><span>Arbeitszeit</span> <strong><span data-time>0</span> Min</strong></div>
        <div class="line"><span>Arbeitskosten</span> <strong><span data-labor>0,00</span> â‚¬</strong></div>
        <div class="line"><span>Material</span> <strong><span data-mat>0,00</span> â‚¬</strong></div>
      </div>
      <div class="muted">
        <div class="line"><span>Overhead</span> <strong><span data-oh>0,00</span> â‚¬</strong></div>
        <div class="line"><span>Gewinn</span> <strong><span data-profit>0,00</span> â‚¬</strong></div>
        <div class="line"><span>Netto</span> <strong><span data-net>0,00</span> â‚¬</strong></div>
      </div>
      <div class="right">
        <div class="line"><div>Brutto</div><div><strong><span data-gross>0,00</span> â‚¬</strong></div></div>
        <div class="line muted"><div>Fertig in</div><div><span data-finish>â€“</span></div></div>
      </div>
    </div>
  </div>
</template>

<script src="app.js" defer></script>
</body>
</html>
